# Releasing Juno

Creating a new Juno release requires 3 steps:

- Create the release on GitHub
- Update juno-sdk to use the new auto-generated SDK
- Change container images on Azure

## Creating a new release on GitHub

Creating a new release on GitHub is fairly straightforward: click the "Create new Release" button on the right sidebar of the repo.

In the "Choose a Tag" dropdown, enter a tag that isn't created (and follow general versioning guidelines). A "Create new tag [name]" button will appear, click on it to set the tag to a newly created tag.

Click the "Generate Release Notes" button to fill in release title + changelog

Optionally check the mark as pre-release checkbox if the release is not ready for production

Once this is done, click the "Publish Release" button to create the release.

Monitor the auto-ran GitHub Action workflow to ensure both the "Upload SDK for Release" and "Upload Production Images" jobs complete successfully.

## Update juno-sdk to use the new auto-generated SDK

After the release is created and all workflows successfully complete, update the juno-sdk repo to incorporate the new autogenerated SDK.

To do this, go to the `juno-sdk` repository, click the "Actions" tab, and find the "Juno SDK Sync OpenAPI" workflow tab. Click on the "Run Workflow" button and confirm to run the synchronization workflow.

Next, look at the auto-generated PR in the `juno-sdk` repository and make any changes to the user-facing portions of the SDK that may have changed or need addition.

Once that's finished and all tests are written/passed, merge the PR into the `main` branch.

Create another PR to change the release version in `package.json` to the tag you will be creating for this version of the `juno-sdk`

Once both PRs are merged in, create a release for the `juno-sdk` repository, following similar steps to the main Juno repo (without worrying about any workflows)

## Change container images on Azure

Log onto Azure and navigate to the `juno` resource group.

Sort the resources by type and for each resource with type `Container App`, do the following:

- Click on the resource
- Click "Applications" > "Revisions & Replicas"
- Click "Create new Revision"
- In the "Container Image" section, click the container/image name
- In the sidebar that opens, change the "Image Tag" dropdown to the new tag you created for the Release
- Click "Save" and then "Create" to create the new revision
